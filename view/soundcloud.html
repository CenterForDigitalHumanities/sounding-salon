<!DOCTYPE html>
<!--
author: Patrick Cuba <cubap@slu.edu>
-->
<html>

<head>
    <title>Sounding Salonâ€”Audio Exhibition</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
        integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/main.css">
</head>

<body>
    <nav class="nav">
        <a href="../">Home</a>
        <a href="sound.html">Audio Exhibit</a>
    </nav>
    <div class="container row">
        <deer-view deer-id="https://centerfordigitalhumanities.github.io/sounding-salon/manifest.json"
            deer-template="navibar">
        </deer-view>

        <iframe id="sc-widget" class="iframe" width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https://soundcloud.com/user-799137985/gladstoneaudio&amp;auto_play=false&amp;buying=false&amp;liking=false&amp;download=true&amp;sharing=false&amp;show_artwork=false&amp;show_comments=false&amp;show_playcount=false&amp;show_user=false&amp;hide_related=false&amp;visual=false&amp;start_track=0&amp;callback=true"></iframe>

    </div>
    <div class="container row" style="display: flex;">
        <deer-view deer-id="https://centerfordigitalhumanities.github.io/sounding-salon/manifest.json"
            deer-template="program">
        </deer-view>

        <deer-view deer-id="https://centerfordigitalhumanities.github.io/sounding-salon/manifest.json"
            deer-template="slideshow">
        </deer-view>
    </div>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script src="view-deer.js" type="module"></script>
    <script src="https://w.soundcloud.com/player/api.js" type="module"></script>
    <script>
        // SC.Widget.Events.PLAY_PROGRESS {"soundId":655729748,"loadedProgress":0.03619590041981364,"currentPosition":13262.949,"relativePosition":0.0024055167673125597}
        (function(){
            var widgetIframe = document.getElementById('sc-widget'),
                widget       = SC.Widget(widgetIframe);

            widget.bind(SC.Widget.Events.PLAY_PROGRESS, function(data) {
                let seconds = data.currentPosition/1000
                Array.from(document.getElementsByClassName("navigation")).forEach(i=>{
                    let start = i.getAttribute("salon-start")
                    let end = i.getAttribute("salon-end")
                    if((seconds > start) && (seconds < end)) {
                        i.classList.add("active")
                    } else {
                        i.classList.remove("active")
                    }           
                })
                Array.from(document.getElementsByClassName("slideshow")).forEach(i=>{
                    let start = i.getAttribute("salon-start")
                    let end = i.getAttribute("salon-end")
                    if((seconds > start) && (seconds < end)) {
                        i.classList.add("active")
                    } else {
                        i.classList.remove("active")
                    }           
                })
            }());
            document.click(event=>{
                
            })
        })()
    </script>
</body>

</html>